<!DOCTYPE html>
<html>
    <head>
        <title>Image Finder</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="imageFinder.css">
    </head>
    <body>
        <div class="heads">   
            <div class="heads-in">
                <h1>Search for image</h1>
            </div>     
            <div class="heads-in"> 
                <input type="text" id="search-inputer" placeholder="Search Image"> <button id="search">search</button>
            </div>
        </div>



            <div class="search-results">
                <div class="search-result">
                    <img src="image/fd2ca9dd2ec2c3b807be26c5d89a0c34.jpg" alt="wtf-is-this">
                    <a href="https://www.facebook.com/loren.ramores.7" target="_blank">This pic</a>
                </div>
                <div class="search-result">
                    <img src="image/fd2ca9dd2ec2c3b807be26c5d89a0c34.jpg" alt="wtf-is-this">
                    <a href="https://www.pinterest.es/pin/803470389752351199/?amp_client_id=CLIENT_ID%28_%29&mweb_unauth_id=&from_amp_pin_page=true" target="_blank">This pic</a>
                </div>
                <div class="search-result">
                    <img src="image/fd2ca9dd2ec2c3b807be26c5d89a0c34.jpg" alt="wtf-is-this">
                    <a href="https://www.pinterest.es/pin/803470389752351199/?amp_client_id=CLIENT_ID%28_%29&mweb_unauth_id=&from_amp_pin_page=true" target="_blank">This pic</a>
                </div>
            </div>



        <script>


    const accessKey = 'VrCaQT5tcqmTcnrQ0IAg1TRJjogxM9P02JVbvZGs398';
    const inputer = document.querySelector('#search-inputer');
    const button = document.querySelector('#search');
    const resultsContainer = document.querySelector('.search-results');

    function searchImage() {
        const inputData = inputer.value;
        const page = 1;
        const api = `https://api.unsplash.com/search/photos?page=${page}&query=${inputData}&client_id=${accessKey}`;

        fetch(api)
            .then(response => response.json())
            .then(data => {
                // Clear previous results
                resultsContainer.innerHTML = '';

                // Handle no results found
                if (!data.results.length) {
                    resultsContainer.innerHTML = '<p>No images found. Try a different search.</p>';
                    return;
                }

                // Display new results
                data.results.forEach(image => {
                    const div = document.createElement('div');
                    div.className = 'search-result';
                    div.innerHTML = `<img src="${image.urls.small}" alt="${image.alt_description}">
                                     <a href="${image.links.html}" target="_blank">View on Unsplash</a>`;
                    resultsContainer.appendChild(div);
                });
            })
            .catch(error => {
                console.error('Error:', error);
                resultsContainer.innerHTML = `<p>Error loading images.</p>`;
            });
    }

    button.addEventListener('click', searchImage);


            /*
            const accessKey = 'VrCaQT5tcqmTcnrQ0IAg1TRJjogxM9P02JVbvZGs398';

            let inputer = document.querySelector('#search-inputer');
            let buttones = document.querySelector('#search');
            let results = document.querySelector('.search-results');
            let result = document.querySelector('.search-result');





            function searchImage() {
                let inputData = inputer.value;
                let page = 1;
                const api = `https://api.unsplash.com/search/photos?page=${page}&query=${inputData}&client_id=${accessKey}`;
            
            fetch(api)
            .then(res => {
                return res.json()
            })
            .then(data => {
                const results = data.results
                console.log(result)
            })

            results.map(res => {
                let imageContainer = document.createElement('div');
                imageContainer.classList.add('result');
                let image = document.createElement('img');
                image.src = result.urls.small;
                let imageLink = document.createElement('a');
                image.href = result.links.html;
                imageLink.target = "_blank";
                imageLink.textContent = result.alt_description;

                imageContainer.appendChild(image);
                imageContainer.appendChild(imageLink);
                imageContainer.appendChild(imageContainer);
            })
        }

        buttones.addEventListener('click', searchImage)

*/

/*
            async function fuckers() {
                inputData = inputE1.value;
                const url = `https://api.unsplash.com/search/photos?page=${page}&query=${inputData}&client=_id=${accessKey}`;
                const response = await fetch(url);
                const data = await response.json();

                const result = data.results
            }
*/

/*
    const accessKey = 'VrCaQT5tcqmTcnrQ0IAg1TRJjogxM9P02JVbvZGs398';
    const inputer = document.querySelector('#search-inputer');
    const button = document.querySelector('#search'); // Use a more descriptive variable name
    const resultsContainer = document.querySelector('.search-results'); // This container will hold the search results

    button.addEventListener('click', function searchImage() {
        const inputData = inputer.value;
        const page = 1;
        // Corrected the client_id parameter
        const api = `https://api.unsplash.com/search/photos?page=${page}&query=${inputData}&client_id=${accessKey}`;

        fetch(api)
            .then(res => res.json())
            .then(data => {
                const images = data.results; // Use a variable that reflects the content
                console.log(images);

                // Clear previous results
                resultsContainer.innerHTML = '';

                // Append new results
                images.forEach(image => {
                    const div = document.createElement('div');
                    div.className = 'search-result';
                    div.innerHTML = `<img src="${image.urls.small}" alt="${image.alt_description}">
                                     <a href="${image.links.html}" target="_blank">View on Unsplash</a>`;
                    resultsContainer.appendChild(div); // Append to the container, not 'result'
                });
            })
            .catch(error => console.error('Error:', error));
    });
*/




        </script>
    </body>
</html>